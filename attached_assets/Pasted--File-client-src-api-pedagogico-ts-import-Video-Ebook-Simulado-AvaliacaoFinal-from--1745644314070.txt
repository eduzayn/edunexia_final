// üìÑ File: client/src/api/pedagogico.ts

import { Video, Ebook, Simulado, AvaliacaoFinal } from "@/types/pedagogico";

// Videos
export async function getVideos(disciplinaId: string): Promise<Video[]> {
  const res = await fetch(`/api/disciplinas/${disciplinaId}/videos`);
  if (!res.ok) throw new Error("Erro ao buscar v√≠deos");
  return res.json();
}

export async function addVideo(disciplinaId: string, video: Partial<Video>) {
  const res = await fetch(`/api/disciplinas/${disciplinaId}/videos`, {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify(video),
  });
  if (!res.ok) throw new Error("Erro ao adicionar v√≠deo");
  return res.json();
}

// Ebooks Est√°ticos
export async function getEbook(disciplinaId: string): Promise<Ebook | null> {
  const res = await fetch(`/api/disciplinas/${disciplinaId}/ebook`);
  if (!res.ok) return null;
  return res.json();
}

export async function addEbook(disciplinaId: string, ebook: Partial<Ebook>) {
  const res = await fetch(`/api/disciplinas/${disciplinaId}/ebook`, {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify(ebook),
  });
  if (!res.ok) throw new Error("Erro ao adicionar e-book");
  return res.json();
}

// Ebooks Interativos
export async function getInteractiveEbook(disciplinaId: string): Promise<Ebook | null> {
  const res = await fetch(`/api/disciplinas/${disciplinaId}/ebook-interativo`);
  if (!res.ok) return null;
  return res.json();
}

export async function addInteractiveEbook(disciplinaId: string, ebook: Partial<Ebook>) {
  const res = await fetch(`/api/disciplinas/${disciplinaId}/ebook-interativo`, {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify(ebook),
  });
  if (!res.ok) throw new Error("Erro ao adicionar e-book interativo");
  return res.json();
}

// Simulado
export async function getSimulado(disciplinaId: string): Promise<Simulado | null> {
  const res = await fetch(`/api/disciplinas/${disciplinaId}/simulado`);
  if (!res.ok) return null;
  return res.json();
}

export async function addSimulado(disciplinaId: string, simulado: Partial<Simulado>) {
  const res = await fetch(`/api/disciplinas/${disciplinaId}/simulado`, {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify(simulado),
  });
  if (!res.ok) throw new Error("Erro ao adicionar simulado");
  return res.json();
}

// Avalia√ß√£o Final
export async function getAvaliacaoFinal(disciplinaId: string): Promise<AvaliacaoFinal | null> {
  const res = await fetch(`/api/disciplinas/${disciplinaId}/avaliacao-final`);
  if (!res.ok) return null;
  return res.json();
}

export async function addAvaliacaoFinal(disciplinaId: string, avaliacao: Partial<AvaliacaoFinal>) {
  const res = await fetch(`/api/disciplinas/${disciplinaId}/avaliacao-final`, {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify(avaliacao),
  });
  if (!res.ok) throw new Error("Erro ao adicionar avalia√ß√£o final");
  return res.json();
}